{"version":3,"file":"_tabs-chunk.mjs","sources":["../../../../../darwin_arm64-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/behaviors/label/label.ts","../../../../../darwin_arm64-fastbuild-ST-fdfa778d11ba/bin/src/aria/private/tabs/tabs.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\nimport {computed, SignalLike} from '../signal-like/signal-like';\n\n/** Represents the required inputs for the label control. */\nexport interface LabelControlInputs {\n  /** The default `aria-labelledby` ids. */\n  defaultLabelledBy: SignalLike<string[]>;\n}\n\n/** Represents the optional inputs for the label control. */\nexport interface LabelControlOptionalInputs {\n  /** The `aria-label`. */\n  label?: SignalLike<string | undefined>;\n\n  /** The user-provided `aria-labelledby` ids. */\n  labelledBy?: SignalLike<string[]>;\n}\n\n/** Controls label and description of an element. */\nexport class LabelControl {\n  /** The `aria-label`. */\n  readonly label = computed(() => this.inputs.label?.());\n\n  /** The `aria-labelledby` ids. */\n  readonly labelledBy = computed(() => {\n    const label = this.label();\n    const labelledBy = this.inputs.labelledBy?.();\n    const defaultLabelledBy = this.inputs.defaultLabelledBy();\n\n    if (labelledBy && labelledBy.length > 0) {\n      return labelledBy;\n    }\n\n    // If an aria-label is provided by developers, do not set aria-labelledby with the\n    // defaultLabelledBy value because if both attributes are set, aria-labelledby will be used.\n    if (label) {\n      return [];\n    }\n\n    return defaultLabelledBy;\n  });\n\n  constructor(readonly inputs: LabelControlInputs & LabelControlOptionalInputs) {}\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {KeyboardEventManager, PointerEventManager} from '../behaviors/event-manager';\nimport {ExpansionItem, ListExpansionInputs, ListExpansion} from '../behaviors/expansion/expansion';\nimport {\n  SignalLike,\n  computed,\n  signal,\n  WritableSignalLike,\n} from '../behaviors/signal-like/signal-like';\nimport {LabelControl, LabelControlOptionalInputs} from '../behaviors/label/label';\nimport {ListFocus} from '../behaviors/list-focus/list-focus';\nimport {\n  ListNavigationItem,\n  ListNavigation,\n  ListNavigationInputs,\n} from '../behaviors/list-navigation/list-navigation';\n\n/** The required inputs to tabs. */\nexport interface TabInputs\n  extends Omit<ListNavigationItem, 'index'>, Omit<ExpansionItem, 'expandable'> {\n  /** The parent tablist that controls the tab. */\n  tablist: SignalLike<TabListPattern>;\n\n  /** The remote tabpanel controlled by the tab. */\n  tabpanel: SignalLike<TabPanelPattern | undefined>;\n\n  /** The remote tabpanel unique identifier. */\n  value: SignalLike<string>;\n}\n\n/** A tab in a tablist. */\nexport class TabPattern {\n  /** A global unique identifier for the tab. */\n  readonly id: SignalLike<string> = () => this.inputs.id();\n\n  /** The index of the tab. */\n  readonly index = computed(() => this.inputs.tablist().inputs.items().indexOf(this));\n\n  /** The remote tabpanel unique identifier. */\n  readonly value: SignalLike<string> = () => this.inputs.value();\n\n  /** Whether the tab is disabled. */\n  readonly disabled: SignalLike<boolean> = () => this.inputs.disabled();\n\n  /** The html element that should receive focus. */\n  readonly element: SignalLike<HTMLElement> = () => this.inputs.element()!;\n\n  /** Whether this tab has expandable panel. */\n  readonly expandable: SignalLike<boolean> = () => true;\n\n  /** Whether the tab panel is expanded. */\n  readonly expanded: WritableSignalLike<boolean>;\n\n  /** Whether the tab is active. */\n  readonly active = computed(() => this.inputs.tablist().inputs.activeItem() === this);\n\n  /** Whether the tab is selected. */\n  readonly selected = computed(() => this.inputs.tablist().selectedTab() === this);\n\n  /** The tab index of the tab. */\n  readonly tabIndex = computed(() => this.inputs.tablist().focusBehavior.getItemTabIndex(this));\n\n  /** The id of the tabpanel associated with the tab. */\n  readonly controls = computed(() => this.inputs.tabpanel()?.id());\n\n  constructor(readonly inputs: TabInputs) {\n    this.expanded = inputs.expanded;\n  }\n\n  /** Opens the tab. */\n  open(): boolean {\n    return this.inputs.tablist().open(this);\n  }\n}\n\n/** The required inputs for the tabpanel. */\nexport interface TabPanelInputs extends LabelControlOptionalInputs {\n  /** A global unique identifier for the tabpanel. */\n  id: SignalLike<string>;\n\n  /** The tab that controls this tabpanel. */\n  tab: SignalLike<TabPattern | undefined>;\n\n  /** A local unique identifier for the tabpanel. */\n  value: SignalLike<string>;\n}\n\n/** A tabpanel associated with a tab. */\nexport class TabPanelPattern {\n  /** A global unique identifier for the tabpanel. */\n  readonly id: SignalLike<string> = () => this.inputs.id();\n\n  /** A local unique identifier for the tabpanel. */\n  readonly value: SignalLike<string> = () => this.inputs.value();\n\n  /** Controls label for this tabpanel. */\n  readonly labelManager: LabelControl;\n\n  /** Whether the tabpanel is hidden. */\n  readonly hidden = computed(() => this.inputs.tab()?.expanded() === false);\n\n  /** The tab index of this tabpanel. */\n  readonly tabIndex = computed(() => (this.hidden() ? -1 : 0));\n\n  /** The aria-labelledby value for this tabpanel. */\n  readonly labelledBy = computed(() =>\n    this.labelManager.labelledBy().length > 0\n      ? this.labelManager.labelledBy().join(' ')\n      : undefined,\n  );\n\n  constructor(readonly inputs: TabPanelInputs) {\n    this.labelManager = new LabelControl({\n      ...inputs,\n      defaultLabelledBy: computed(() => (this.inputs.tab() ? [this.inputs.tab()!.id()] : [])),\n    });\n  }\n}\n\n/** The required inputs for the tablist. */\nexport interface TabListInputs\n  extends\n    Omit<ListNavigationInputs<TabPattern>, 'multi'>,\n    Omit<ListExpansionInputs, 'multiExpandable' | 'items'> {\n  /** The selection strategy used by the tablist. */\n  selectionMode: SignalLike<'follow' | 'explicit'>;\n}\n\n/** Controls the state of a tablist. */\nexport class TabListPattern {\n  /** The list focus behavior for the tablist. */\n  readonly focusBehavior: ListFocus<TabPattern>;\n\n  /** The list navigation behavior for the tablist. */\n  readonly navigationBehavior: ListNavigation<TabPattern>;\n\n  /** Controls expansion for the tablist. */\n  readonly expansionBehavior: ListExpansion;\n\n  /** The currently active tab. */\n  readonly activeTab: SignalLike<TabPattern | undefined> = () => this.inputs.activeItem();\n\n  /** The currently selected tab. */\n  readonly selectedTab: WritableSignalLike<TabPattern | undefined> = signal(undefined);\n\n  /** Whether the tablist is vertically or horizontally oriented. */\n  readonly orientation: SignalLike<'vertical' | 'horizontal'> = () => this.inputs.orientation();\n\n  /** Whether the tablist is disabled. */\n  readonly disabled: SignalLike<boolean> = () => this.inputs.disabled();\n\n  /** The tab index of the tablist. */\n  readonly tabIndex = computed(() => this.focusBehavior.getListTabIndex());\n\n  /** The id of the current active tab. */\n  readonly activeDescendant = computed(() => this.focusBehavior.getActiveDescendant());\n\n  /** Whether selection should follow focus. */\n  readonly followFocus = computed(() => this.inputs.selectionMode() === 'follow');\n\n  /** The key used to navigate to the previous tab in the tablist. */\n  readonly prevKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowUp';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowRight' : 'ArrowLeft';\n  });\n\n  /** The key used to navigate to the next item in the list. */\n  readonly nextKey = computed(() => {\n    if (this.inputs.orientation() === 'vertical') {\n      return 'ArrowDown';\n    }\n    return this.inputs.textDirection() === 'rtl' ? 'ArrowLeft' : 'ArrowRight';\n  });\n\n  /** The keydown event manager for the tablist. */\n  readonly keydown = computed(() => {\n    return new KeyboardEventManager()\n      .on(this.prevKey, () =>\n        this._navigate(() => this.navigationBehavior.prev(), this.followFocus()),\n      )\n      .on(this.nextKey, () =>\n        this._navigate(() => this.navigationBehavior.next(), this.followFocus()),\n      )\n      .on('Home', () => this._navigate(() => this.navigationBehavior.first(), this.followFocus()))\n      .on('End', () => this._navigate(() => this.navigationBehavior.last(), this.followFocus()))\n      .on(' ', () => this.open())\n      .on('Enter', () => this.open());\n  });\n\n  /** The pointerdown event manager for the tablist. */\n  readonly pointerdown = computed(() => {\n    return new PointerEventManager().on(e =>\n      this._navigate(() => this.navigationBehavior.goto(this._getItem(e)!), true),\n    );\n  });\n\n  constructor(readonly inputs: TabListInputs) {\n    this.focusBehavior = new ListFocus(inputs);\n\n    this.navigationBehavior = new ListNavigation({\n      ...inputs,\n      focusManager: this.focusBehavior,\n    });\n\n    this.expansionBehavior = new ListExpansion({\n      ...inputs,\n      multiExpandable: () => false,\n    });\n  }\n\n  /**\n   * Sets the tablist to its default initial state.\n   *\n   * Sets the active index of the tablist to the first focusable selected\n   * tab if one exists. Otherwise, sets focus to the first focusable tab.\n   *\n   * This method should be called once the tablist and its tabs are properly initialized.\n   */\n  setDefaultState() {\n    let firstItem: TabPattern | undefined;\n\n    for (const item of this.inputs.items()) {\n      if (!this.focusBehavior.isFocusable(item)) continue;\n\n      if (firstItem === undefined) {\n        firstItem = item;\n      }\n\n      if (item.selected()) {\n        this.inputs.activeItem.set(item);\n        return;\n      }\n    }\n    if (firstItem !== undefined) {\n      this.inputs.activeItem.set(firstItem);\n    }\n  }\n\n  /** Handles keydown events for the tablist. */\n  onKeydown(event: KeyboardEvent) {\n    if (!this.disabled()) {\n      this.keydown().handle(event);\n    }\n  }\n\n  /** The pointerdown event manager for the tablist. */\n  onPointerdown(event: PointerEvent) {\n    if (!this.disabled()) {\n      this.pointerdown().handle(event);\n    }\n  }\n\n  /** Opens the tab by given value. */\n  open(value: string): boolean;\n\n  /** Opens the given tab or the current active tab. */\n  open(tab?: TabPattern): boolean;\n\n  open(tab: TabPattern | string | undefined): boolean {\n    tab ??= this.activeTab();\n\n    if (typeof tab === 'string') {\n      tab = this.inputs.items().find(t => t.value() === tab);\n    }\n\n    if (tab === undefined) return false;\n\n    const success = this.expansionBehavior.open(tab);\n    if (success) {\n      this.selectedTab.set(tab);\n    }\n\n    return success;\n  }\n\n  /** Executes a navigation operation and expand the active tab if needed. */\n  private _navigate(op: () => boolean, shouldExpand: boolean = false): void {\n    const success = op();\n    if (success && shouldExpand) {\n      this.open();\n    }\n  }\n\n  /** Returns the tab item associated with the given pointer event. */\n  private _getItem(e: PointerEvent) {\n    if (!(e.target instanceof HTMLElement)) {\n      return;\n    }\n\n    const element = e.target.closest('[role=\"tab\"]');\n    return this.inputs.items().find(i => i.element() === element);\n  }\n}\n"],"names":["LabelControl","inputs","label","computed","labelledBy","defaultLabelledBy","length","constructor","TabPattern","id","index","tablist","items","indexOf","value","disabled","element","expandable","expanded","active","activeItem","selected","selectedTab","tabIndex","focusBehavior","getItemTabIndex","controls","tabpanel","open","TabPanelPattern","labelManager","hidden","tab","join","undefined","TabListPattern","navigationBehavior","expansionBehavior","activeTab","signal","orientation","getListTabIndex","activeDescendant","getActiveDescendant","followFocus","selectionMode","prevKey","textDirection","nextKey","keydown","KeyboardEventManager","on","_navigate","prev","next","first","last","pointerdown","PointerEventManager","e","goto","_getItem","ListFocus","ListNavigation","focusManager","ListExpansion","multiExpandable","setDefaultState","firstItem","item","isFocusable","set","onKeydown","event","handle","onPointerdown","find","t","success","op","shouldExpand","target","HTMLElement","closest","i"],"mappings":"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"}